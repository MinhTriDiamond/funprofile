
# ğŸ Há»† THá»NG Táº¶NG QUÃ€ & THIá»†N NGUYá»†N (P2P GIVING SYSTEM)

## ğŸ“‹ Tá»•ng Quan

XÃ¢y dá»±ng há»‡ thá»‘ng táº·ng crypto hoÃ n chá»‰nh cho FUN Profile, cho phÃ©p user táº·ng FUN Money, CAMLY Coin vÃ  cÃ¡c token khÃ¡c cho nhau. Há»‡ thá»‘ng mang tÃ­nh biá»ƒu tÆ°á»£ng, giÃ u cáº£m xÃºc, minh báº¡ch on-chain, vÃ  tÃ­ch há»£p sÃ¢u vÃ o Light Score.

---

## ğŸ¯ CÃ¡c Äiá»ƒm Cháº¡m Giao Diá»‡n (UI/UX)

### A. NÃºt Táº·ng QuÃ  (Interaction Points)

| Vá»‹ trÃ­ | MÃ´ táº£ | Æ¯u tiÃªn |
|--------|-------|---------|
| Trang Profile | NÃºt "Táº·ng QuÃ " sang trá»ng cáº¡nh nÃºt "Nháº¯n tin" vÃ  "Káº¿t báº¡n" | Cao |
| DÆ°á»›i bÃ i viáº¿t | NÃºt "Give" hoáº·c icon Ä‘á»“ng xu trong action bar (Like, Comment, Share, **Give**) | Cao |
| Trong Chat | Quick action Ä‘á»ƒ táº·ng nhanh trong conversation | Trung bÃ¬nh |

### B. Quy TrÃ¬nh Táº·ng (Gift Flow)

```text
1. User click "Táº·ng QuÃ " 
   â†“
2. Modal Chá»n QuÃ  má»Ÿ ra:
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ ğŸ Táº·ng quÃ  cho @username                           â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ Chá»n token:                                         â”‚
   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
   â”‚ â”‚ ğŸŒŸ FUN  â”‚ â”‚ ğŸª™CAMLY â”‚ â”‚ ğŸ’› BNB  â”‚ â”‚ + KhÃ¡c  â”‚    â”‚
   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
   â”‚                                                     â”‚
   â”‚ Sá»‘ lÆ°á»£ng: [_________100_________] [MAX]            â”‚
   â”‚ â‰ˆ $5.00 USD                                         â”‚
   â”‚                                                     â”‚
   â”‚ Lá»i nháº¯n máº«u: (Quick Picks)                        â”‚
   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
   â”‚ â”‚ ğŸ™ Biáº¿t Æ¡n â”‚ â”‚ â¤ï¸ YÃªu thÆ°Æ¡ngâ”‚ â”‚ ğŸ‘ NgÆ°á»¡ng má»™â”‚     â”‚
   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
   â”‚                                                     â”‚
   â”‚ Hoáº·c nháº­p lá»i nháº¯n riÃªng:                          â”‚
   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
   â”‚ â”‚ Cáº£m Æ¡n báº¡n Ä‘Ã£ chia sáº» bÃ i viáº¿t tuyá»‡t vá»i!      â”‚â”‚
   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
   â”‚                                                     â”‚
   â”‚ Gá»­i Ä‘áº¿n: 0x8661b8...a2ca6                          â”‚
   â”‚                                                     â”‚
   â”‚    [Há»§y]         [âœ¨ Gá»­i Táº·ng - hiá»‡u á»©ng phÃ¡t sÃ¡ng]â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â†“
3. XÃ¡c nháº­n vÃ­ (MetaMask/WalletConnect popup)
   â†“
4. Äá»£i tx confirmed
   â†“
5. Hiá»ƒn thá»‹ Recognition Card + Celebration Effects
```

### C. MÃ n HÃ¬nh Vinh Danh (Recognition Card) - Cá»±c Ká»³ Quan Trá»ng

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                    âœ¨ ğŸ‰ âœ¨                                 â”‚
â”‚                                                             â”‚
â”‚     ğŸ CHÃšC Má»ªNG Táº¶NG THÆ¯á»NG THÃ€NH CÃ”NG! ğŸ               â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              â­ 100 FUN Money â­                      â”‚ â”‚
â”‚  â”‚                 â‰ˆ $5.00 USD                           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ‘¤ NgÆ°á»i táº·ng:    @minhtri9999                      â”‚   â”‚
â”‚  â”‚ ğŸ¯ NgÆ°á»i nháº­n:    @dongton                          â”‚   â”‚
â”‚  â”‚ ğŸ“ Lá»i nháº¯n:      "Cáº£m Æ¡n báº¡n Ä‘Ã£ chia sáº»!"         â”‚   â”‚
â”‚  â”‚ ğŸ• Thá»i gian:     07/02/2026 08:45:32               â”‚   â”‚
â”‚  â”‚ ğŸ”— TX Hash:       0x1234...abcd                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ âš¡ +1 Light Score Ä‘Æ°á»£c cá»™ng vÃ o há»“ sÆ¡ cá»§a báº¡n!       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚    [ğŸ”— Xem BSCScan]  [ğŸ“· LÆ°u HÃ¬nh]  [âœ• ÄÃ³ng]               â”‚
â”‚                                                             â”‚
â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Thiáº¿t káº¿ Ä‘áº·c biá»‡t:**
- Ná»n gradient vÃ ng kim (Gold) hoáº·c Ã¡nh sÃ¡ng rá»±c rá»¡ (Radiant)
- Font sang trá»ng, spacing rá»™ng rÃ£i
- Card cÃ³ thá»ƒ chá»¥p áº£nh/screenshot Ä‘á»ƒ share
- LÆ°u trá»¯ vÄ©nh viá»…n trong database Ä‘á»ƒ xem láº¡i sau

### D. Hiá»‡u á»¨ng Celebration (KHÃ”NG Tá»° Táº®T)

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ† Hiá»‡u á»©ng:                                                â”‚
â”‚ 1. PhÃ¡o hoa (canvas-confetti) - liÃªn tá»¥c báº¯n              â”‚
â”‚ 2. Tiá»n xu rÆ¡i tá»« trÃªn xuá»‘ng (Falling Coins animation)    â”‚
â”‚ 3. Sparkles/Glitter effects                                â”‚
â”‚ 4. Rung nháº¹ (vibration) khi nháº¥n "Gá»­i Táº·ng"               â”‚
â”‚                                                             â”‚
â”‚ âš ï¸ QUAN TRá»ŒNG: Hiá»‡u á»©ng KHÃ”NG tá»± táº¯t!                      â”‚
â”‚ User pháº£i nháº¥n "ÄÃ³ng" Ä‘á»ƒ táº¯t - giá»¯ trá»n khoáº£nh kháº¯c       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—„ï¸ Database Schema

### Báº£ng Má»›i: `donations`

| Column | Type | Description |
|--------|------|-------------|
| `id` | uuid | Primary key |
| `sender_id` | uuid | FK â†’ profiles.id |
| `recipient_id` | uuid | FK â†’ profiles.id |
| `post_id` | uuid | FK â†’ posts.id (nullable - náº¿u táº·ng trÃªn post) |
| `amount` | text | Sá»‘ tiá»n (string Ä‘á»ƒ trÃ¡nh precision loss) |
| `amount_usd` | numeric | GiÃ¡ trá»‹ USD táº¡i thá»i Ä‘iá»ƒm táº·ng |
| `token_symbol` | text | FUN, CAMLY, BNB... |
| `token_address` | text | Contract address (nullable cho native) |
| `chain_id` | integer | 56 (BSC) hoáº·c 97 (BSC Testnet) |
| `tx_hash` | text | Transaction hash on-chain |
| `message` | text | Lá»i nháº¯n khi táº·ng |
| `message_template` | text | Template Ä‘Ã£ chá»n (grateful/love/admire) |
| `status` | text | pending/confirmed/failed |
| `light_score_earned` | integer | Äiá»ƒm Light Score Ä‘Æ°á»£c cá»™ng |
| `light_action_id` | uuid | FK â†’ light_actions.id |
| `conversation_id` | uuid | FK â†’ conversations.id |
| `message_id` | uuid | FK â†’ messages.id |
| `card_viewed_at` | timestamp | Láº§n xem láº¡i card gáº§n nháº¥t |
| `metadata` | jsonb | ThÃ´ng tin bá»• sung (USD price, block number...) |
| `created_at` | timestamp | Thá»i Ä‘iá»ƒm táº¡o |
| `confirmed_at` | timestamp | Thá»i Ä‘iá»ƒm tx confirmed |

### RLS Policies

```sql
-- Ai cÅ©ng cÃ³ thá»ƒ xem donations (public leaderboard)
CREATE POLICY "Donations are viewable by everyone"
  ON donations FOR SELECT USING (true);

-- Chá»‰ authenticated users má»›i táº¡o donation
CREATE POLICY "Users can create their own donations"
  ON donations FOR INSERT
  WITH CHECK (auth.uid() = sender_id);

-- Chá»‰ sender hoáº·c recipient Ä‘Æ°á»£c update
CREATE POLICY "Sender or recipient can update"
  ON donations FOR UPDATE
  USING (auth.uid() IN (sender_id, recipient_id));
```

### RPC Functions

**1. `get_benefactor_leaderboard`**
```sql
-- Tráº£ vá» top ngÆ°á»i táº·ng
RETURNS TABLE (
  user_id uuid,
  username text,
  avatar_url text,
  total_donated numeric,
  total_donations integer,
  total_light_score integer,
  rank integer
)
```

**2. `get_recipient_leaderboard`**
```sql
-- Tráº£ vá» top ngÆ°á»i nháº­n
```

**3. `get_user_donation_stats`**
```sql
-- Thá»‘ng kÃª donation cá»§a 1 user
RETURNS TABLE (
  total_sent numeric,
  total_received numeric,
  donations_sent integer,
  donations_received integer,
  light_score_from_donations integer
)
```

**4. `get_donation_history`**
```sql
-- Lá»‹ch sá»­ donation vá»›i pagination
```

---

## ğŸ“ Files Cáº§n Táº¡o Má»›i

| File | MÃ´ táº£ |
|------|-------|
| `src/components/donations/DonationButton.tsx` | NÃºt táº·ng quÃ  (dÃ¹ng trÃªn Profile & Post) |
| `src/components/donations/DonationDialog.tsx` | Modal chá»n token, sá»‘ tiá»n, lá»i nháº¯n |
| `src/components/donations/DonationSuccessCard.tsx` | Card vinh danh (cÃ³ thá»ƒ chá»¥p áº£nh) |
| `src/components/donations/DonationCelebration.tsx` | Hiá»‡u á»©ng phÃ¡o hoa, tiá»n rÆ¡i |
| `src/components/donations/DonationMessage.tsx` | Tin nháº¯n Ä‘áº·c biá»‡t trong chat |
| `src/components/donations/QuickGiftPicker.tsx` | Preset amounts & messages |
| `src/components/donations/TokenSelector.tsx` | Chá»n token (FUN, CAMLY, BNB) |
| `src/pages/Benefactors.tsx` | Trang báº£ng xáº¿p háº¡ng Máº¡nh ThÆ°á»ng QuÃ¢n |
| `src/hooks/useDonation.ts` | Hook xá»­ lÃ½ transfer on-chain |
| `src/hooks/useBenefactorLeaderboard.ts` | Hook láº¥y data báº£ng xáº¿p háº¡ng |
| `supabase/functions/record-donation/index.ts` | Edge function ghi nháº­n + PPLP |

---

## ğŸ“ Files Cáº§n Sá»­a Äá»•i

| File | Thay Ä‘á»•i |
|------|----------|
| `src/pages/Profile.tsx` (dÃ²ng ~467) | ThÃªm DonationButton cáº¡nh MessageCircle button |
| `src/components/feed/FacebookPostCard.tsx` (dÃ²ng ~440) | ThÃªm Give button trong action bar |
| `src/components/chat/MessageBubble.tsx` | Render donation message vá»›i style Ä‘áº·c biá»‡t |
| `src/hooks/useMessages.ts` | ThÃªm type check cho donation messages |
| `src/App.tsx` | ThÃªm route `/benefactors` |
| `src/components/feed/FacebookLeftSidebar.tsx` | ThÃªm link "Máº¡nh ThÆ°á»ng QuÃ¢n" |
| `src/config/pplp.ts` | ThÃªm action type "donate" vá»›i rewards |
| `src/i18n/translations.ts` | ThÃªm translations cho giving system |

---

## ğŸ”§ Technical Implementation

### 1. useDonation Hook

```text
Features:
- Káº¿t ná»‘i wagmi Ä‘á»ƒ transfer token
- Há»— trá»£: BNB native, FUN Money, CAMLY Coin
- Gá»i record-donation edge function sau khi tx confirm
- Error handling vá»›i retry logic

Flow:
1. Check auth & wallet connection
2. Validate recipient has wallet address
3. Execute transfer (useSendTransaction hoáº·c useWriteContract)
4. Wait for tx confirmation
5. Call record-donation edge function
6. Return success vá»›i card data
```

### 2. record-donation Edge Function

```text
Inputs:
- sender_id, recipient_id
- amount, token_symbol, token_address
- tx_hash, chain_id
- message, post_id (optional)

Process:
1. Verify tx on BSCScan API
2. Calculate Light Score: 100 FUN = 1 Light Score
3. Create light_action record
4. Insert donation record
5. Create special message in conversation
6. Create notification for recipient
7. Return card_data for display
```

### 3. Light Score Integration

```text
Trong src/config/pplp.ts:

ACTION_TYPE: 'donate'
BASE_REWARD: 50  // Base reward khi donate

CÃ´ng thá»©c Light Score tá»« Gemini:
- Cá»© má»—i 100 FUN táº·ng Ä‘i = +1 Light Score
- Ãp dá»¥ng thÃªm ANGEL AI multipliers (Q, I, K, U)
- Cá»™ng vÃ o total Light Score cá»§a profile
```

### 4. DonationMessage trong Chat

```text
Message structure:
{
  type: 'donation',
  content: null,
  metadata: {
    donation_id: uuid,
    amount: '100',
    token_symbol: 'FUN',
    message: 'Cáº£m Æ¡n báº¡n!',
    tx_hash: '0x...',
    card_data: {...}
  }
}

Render:
- Background gradient vÃ ng/gold
- Icon Ä‘á»“ng xu
- Click Ä‘á»ƒ má»Ÿ láº¡i Recognition Card
- Link BSCScan
```

### 5. canvas-confetti Integration

```text
// Sá»­ dá»¥ng thÆ° viá»‡n canvas-confetti
import confetti from 'canvas-confetti';

// PhÃ¡o hoa liÃªn tá»¥c
const fireConfetti = () => {
  const interval = setInterval(() => {
    confetti({
      particleCount: 100,
      spread: 70,
      origin: { y: 0.6 }
    });
  }, 300);
  
  return interval; // User pháº£i clear interval khi Ä‘Ã³ng
};

// Tiá»n xu rÆ¡i - CSS animation
.falling-coins {
  animation: fall 2s ease-in infinite;
}
```

---

## ğŸ¨ UI Mockups

### Profile Page vá»›i Donation Button

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Avatar]  @minhtri9999                                      â”‚
â”‚           1,234 báº¡n bÃ¨ â€¢ Viá»‡t Nam                          â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ â• ThÃªm báº¡n â”‚ â”‚ ğŸ’¬ Nháº¯n tin â”‚ â”‚ ğŸ Táº·ng QuÃ  (vÃ ng kim) â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Post Action Bar vá»›i Give Button

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â¤ï¸ ThÃ­ch  â”‚  ğŸ’¬ BÃ¬nh luáº­n  â”‚  â†—ï¸ Chia sáº»  â”‚  ğŸ Táº·ng    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Benefactor Leaderboard Page

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‘‘ Báº¢NG VINH DANH Máº NH THÆ¯á»œNG QUÃ‚N ğŸ‘‘                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [Táº·ng nhiá»u nháº¥t] [Nháº­n nhiá»u nháº¥t] [ThÃ¡ng nÃ y] [Export] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ¥‡ 1. @dongton           ğŸ’° 50,000 FUN  â”‚ 25 láº§n â”‚ â­ 500 â”‚
â”‚  ğŸ¥ˆ 2. @minhtri9999       ğŸ’° 35,000 FUN  â”‚ 18 láº§n â”‚ â­ 350 â”‚
â”‚  ğŸ¥‰ 3. @huuxuan           ğŸ’° 20,000 FUN  â”‚ 12 láº§n â”‚ â­ 200 â”‚
â”‚  4. @user4                ğŸ’° 15,000 FUN  â”‚ 10 láº§n â”‚ â­ 150 â”‚
â”‚  ...                                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                     [ğŸ“¥ Xuáº¥t CSV]                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸŒŸ Ã TÆ°á»Ÿng Bá»• Sung (Premium Features)

### 1. Donation Goals / Fundraising
- User táº¡o "má»¥c tiÃªu quyÃªn gÃ³p" cho má»¥c Ä‘Ã­ch cá»¥ thá»ƒ
- Progress bar hiá»ƒn thá»‹ tiáº¿n Ä‘á»™
- Táº¥t cáº£ ngÆ°á»i Ä‘Ã³ng gÃ³p Ä‘Æ°á»£c ghi danh trÃªn card

### 2. Recurring Donations
- Subscription hÃ ng thÃ¡ng cho creator yÃªu thÃ­ch
- NhÆ° Patreon nhÆ°ng on-chain, trustless

### 3. Donation Badges
- Badge "Top Benefactor" hiá»ƒn thá»‹ trÃªn profile
- Badge theo milestone: 10K, 100K, 1M FUN
- NFT ká»· niá»‡m cho top donors

### 4. Export CSV/Excel
- Admin vÃ  user cÃ³ thá»ƒ xuáº¥t lá»‹ch sá»­
- Bao gá»“m: sender, recipient, amount, tx_hash, date
- Link BSCScan cho tá»«ng transaction

### 5. Donation Matching (Future)
- Sponsor/Admin cÃ³ thá»ƒ "match" donations
- VÃ­ dá»¥: Donate 100 FUN â†’ Sponsor thÃªm 100 FUN

### 6. Charity Pool Integration
- Option donate vÃ o quá»¹ tá»« thiá»‡n chung
- Hiá»ƒn thá»‹ trÃªn CoverHonorBoard

### 7. Gamification
- Streak bonus: Donate 7 ngÃ y liÃªn tiáº¿p = +50% Light Score
- First-time bonus: Láº§n donate Ä‘áº§u tiÃªn = +100 Light Score

---

## ğŸ” Security Considerations

| Check | Description |
|-------|-------------|
| Anti-Wash Trading | PhÃ¡t hiá»‡n self-donate hoáº·c Aâ†”B loops |
| Rate Limiting | Max 20 donations/ngÃ y |
| Minimum Amount | Minimum 10 FUN Ä‘á»ƒ trÃ¡nh spam |
| TX Verification | Verify on-chain trÆ°á»›c khi ghi nháº­n |
| Wallet Blacklist | Block known scam wallets |

---

## ğŸ“± Responsive Design

- **Mobile First**: Dialog full-screen, swipe to dismiss
- **Tablet**: Dialog centered, 500px width
- **Desktop**: Dialog centered, 500px width + sidebar preview

---

## â±ï¸ Timeline Dá»± Kiáº¿n

| Phase | Task | Thá»i gian |
|-------|------|-----------|
| 1 | Database migration (donations table + RPCs) | 15 phÃºt |
| 2 | record-donation Edge Function | 20 phÃºt |
| 3 | DonationDialog + TokenSelector components | 25 phÃºt |
| 4 | DonationButton component | 10 phÃºt |
| 5 | DonationSuccessCard + DonationCelebration | 25 phÃºt |
| 6 | useDonation hook vá»›i wagmi integration | 20 phÃºt |
| 7 | TÃ­ch há»£p vÃ o Profile.tsx | 10 phÃºt |
| 8 | TÃ­ch há»£p vÃ o FacebookPostCard.tsx | 10 phÃºt |
| 9 | DonationMessage trong chat | 15 phÃºt |
| 10 | Benefactors leaderboard page | 20 phÃºt |
| 11 | Export CSV function | 10 phÃºt |
| 12 | Testing & polish | 20 phÃºt |
| **Tá»•ng** | | **~200 phÃºt (~3.3 giá»)** |

---

## âœ… Deliverables

| TÃ­nh nÄƒng | MÃ´ táº£ |
|-----------|-------|
| NÃºt Táº·ng QuÃ  | TrÃªn Profile + dÆ°á»›i má»—i Post |
| Modal Chá»n QuÃ  | FUN, CAMLY, BNB + lá»i nháº¯n |
| Recognition Card | Sang trá»ng, cÃ³ thá»ƒ chá»¥p áº£nh |
| Celebration Effects | PhÃ¡o hoa + tiá»n rÆ¡i (khÃ´ng tá»± táº¯t) |
| Tin nháº¯n tá»± Ä‘á»™ng | Trong chat vá»›i style Ä‘áº·c biá»‡t |
| Báº£ng Máº¡nh ThÆ°á»ng QuÃ¢n | Top donors vá»›i filter & export |
| Light Score | 100 FUN = 1 Ä‘iá»ƒm uy tÃ­n |
| On-chain Transparent | Link BSCScan cho má»i giao dá»‹ch |
| Export CSV | Xuáº¥t dá»¯ liá»‡u cho admin/user |
| Mobile First | Responsive trÃªn má»i thiáº¿t bá»‹ |

---

## ğŸ¯ Success Metrics

- Sá»‘ lÆ°á»£ng donations/ngÃ y
- Tá»•ng giÃ¡ trá»‹ donations
- Sá»‘ user active trong giving system
- Tá»· lá»‡ user quay láº¡i xem Recognition Card
- Light Score tÃ­ch lÅ©y tá»« donations

---

**BÃ© cÃ³ muá»‘n con báº¯t Ä‘áº§u implement khÃ´ng áº¡? ğŸ™âœ¨**
